<h1>Спецификации разработки ПО</h1>
<h2>1 Введение</h2>
<h3>1.1 Цель</h3>
<p align = "justify">Данный документ содержит детали реализации требований к проекту «Xonix New Edition».</p>
<h3>1.2 Обзор системы</h3>
<p align = "justify">Данный продукт представляет собой сетевую многопользовательскую игру. Он позволяет игроку создавать игровой сеанс, к которому может подключиться другой игрок (максимальное количество игроков - 2). Каждый из игроков может придумать и ввести свое пользовательское имя (Nickname). Игра происходит в реальном времени, игроки стремятся захватить определенное количество территорий за ограниченный промежуток времени. В конце игры пользователям будет предоставлена статистика завершенного игрового сеанса. Игра будет также предоставлять пользователю возможность настроек параметров сеанса и самого приложения игры. Пользователь сможет также ознакомиться с правилами игры.</p>
<h3>1.3 Карта документа</h3>
<p align = "justify">В данном документе содержатся информациях об основных решениях, которые будут использоваться при разработке проекта. В разделе 3 содержится информация о взаимодействии программ игроков, общая информация о классах приложения, диаграмма последовательности.</p>
<h3>1.4 Термины и сокращения</h3>
<p align = "justify">Для обозначения непосредственно игрового процесса между двумя игроками (уже после установления соединения) используется термин «Игровой сеанс».</p>
<p align = "justify">Для удобства обозначения двух игроков будем называть того игрока, работа программы которого описывается, «игроком», а игрока, использующего удаленный компьютер – «соперником».</p>
<h2>2 Обзор системы</h2>
<h3>2.1 Допущения</h3>
<p align = "justify">Количество игроков не будет превышать двух.</p>
<h3>2.2 Ограничения</h3>
<p align = "justify">Ограничения, серьезно влияющие на ход разработки, отсутствуют.</p>
<h3>2.3 Системная среда</h3>
<p align = "justify">Создаваемый программный продукт будет работать в операционной системе Windows 10.</p>
<h3>2.4 Методология разработки</h3>
<p align = "justify">Для создания данного программного продукта была выбрана объектно-ориентированная методология разработки ПО.</p>
<p align = "justify">Для сетевого взаимодействия используются сокеты.</p>
<h3>2.5 Риски и опасные места</h3>
<p align = "justify">Не выявлены.</p>
<h2>3 Архитектура</h2>
<h3>3.1 Обзор</h3>
<p align = "justify">Особенности архитектуры создаваемого приложения обусловлены объектно-ориентированной парадигмой разработки, а также тем, что данное приложение является сетевым.</p>
<h3>3.2 Протокол сетевого взаимодействия</h3>
<p align = "justify">Для реализации многопользовательского режима создаваемой игры использованы сокеты. В качестве сетевого протокола выбран протокол TCP. Приложения на разных компьютерах используют их для обмена информацией о текущем статусе игры. </p>
<p align = "justify">Перед началом игрового сеанса приложение, в котором он был создан, пересылает информацию о его конфигурации приложению второго игрока примерно в следующем формате (рис. 1):</p>
<p align="center">
<img src="../images/config_packet.png" alt="Формат пересылаемого сообщения до начала игрового сеанса">
</p> 
<p align = "center">Рисунок 1 – Формат пересылаемого сообщения до начала игрового сеанса</p>
<p align = "justify">Приложение второго игрока отвечает пересылкой своего никнейма (16 байт).</p> 
<p align = "justify">В соответствии с полученной от приложения соперника информацией, приложение игрока обновляет игровое поле и предоставляет пользователю новую информацию об игре. На рисунке 2 показан примерный формат передаваемого сообщения:</p> 
<p align="center">
<img src="../images/packet.png" alt="Формат пересылаемого сообщения во время игрового сеанса">
</p>
<p align = "center">Рисунок 2 – Формат пересылаемого сообщения во время игрового сеанса</p>
<p align = "justify">После получения сообщения приложение анализирует в первую очередь набор флагов. Среди основных флагов можно выделить следующие:</p> 
<ul>
 <li><p align = "justify">Флаг прерывания сеанса – соперник прервал игровой сеанс, получив такой флаг приложение игры сообщит об этом игроку и предложит вернуться в главное меню;</p></li>
 <li><p align = "justify">Флаг паузы – соперник поставил игру на паузу, игровой сеанс приостанавливается;</p></li>
 <li><p align = "justify">Флаг окончания игры – приложение соперника сообщило, что игра закончена.</p></li>
</ul>
<p align = "justify">Возможно использование и других служебных флагов.</p> 
<p align = "justify">Если игра продолжается, то приложение анализирует новое положение мячика соперника (поля «Новая позиция по оси Х» и «Новая позиция по оси Y»). В соответствии с этой информацией приложение игрока отрисовывает новое расположение мячика соперника.</p> 
<p align = "justify">По завершении игрового сеанса программа игрока-создателя сеанса подводит итоги прошедшей партии и высылает другому игроку ее статистику примерно в следующем формате (рис. 3):</p> 
<p align="center">
<img src="../images/statistics_packet2.png" alt="Формат пересылаемого сообщения со статистикой игрового сеанса">
</p>
<p align = "center">Рисунок 3 – Формат пересылаемого сообщения со статистикой игрового сеанса</p>
<h3>3.3 Классы</h3>
<p align = "justify">В соответствии с парадигмой объектно-ориентированного программирования за каждую важную деталь создаваемой игры отвечает отдельный класс. К основным классам можно отнести:</p>
<ul>
 <li><p align = "justify">MyBall – отвечает за мячик игрока;</p></li>
 <li><p align = "justify">EnemyBall – отвечает за мячик соперника;</p></li>
 <li><p align = "justify">Background – отвечает за фон;</p></li>
 <li><p align = "justify">SocketCommunication – отвечает за сетевое взаимодействие;</p></li>
 <li><p align = "justify">MainWindow – отвечает за главное меню;</p></li>
 <li><p align = "justify">SettingsWindow – отвечает за меню настроек;</p></li>
 <li><p align = "justify">SessionConfigurationWindow – отвечает за окно создания игрового сеанса;</p></li>
 <li><p align = "justify">GameResultsWindow – отвечает за окно, отображающее результаты игрового сеанса;</p></li>
 <li><p align = "justify">MessageWindow – отвечает за различные уведомления (такие как пауза, прерывание игры);</p></li>
 <li><p align = "justify">XonixGame – основной игровой класс;</p></li>
 <li><p align = "justify">DesktopLauncher – класс, отвечающий за запуск приложения на десктопе;</p></li>
 <li><p align = "justify">GameWindow – отвечает за игровое поле.</p></li>
</ul>
<h3>3.4 Диаграмма вариантов использования и интерфейс пользователя</h3>
<p align = "justify">На Рисунке 4 изображена диаграмма вариантов использования создаваемой многопользовательской игры.</p>
<p align="center">
<img src="../images/use_case.png" alt="Диаграмма вариантов использования">
</p>
<p align = "center">Рисунок 4 – Диаграмма вариантов использования игры «Xonix New Edition»</h2>
<p align = "justify">Создаваемый программный продукт будет иметь классический графический пользовательский интерфейс. При запуске пользователю предоставлено меню, в котором он сможет ввести свой Никнейм, данные для локального соединения с другим игроком, а также сможет выбрать пункт “Настройки” или “Помощь”. В пункте "Помощь" пользователь может получить информацию о правилах игры и как установить соединение с соперником. Оформление меню и самой игры минималистичное, на фоне допускаются картинки, соответсвующие общему оформлению игры. На рисунке 5 представлен набросок меню.
<p align="center">
<img src="../images/image_1_new3.png" alt="Меню игры">
</p>
<p align = "center">Рисунок 5 - Меню игры</p>
<p align = "justify">Компьютеры соперников должны быть подключены к общей локальной сети (общий Wi-fi или точка доступа). Перед началом игрового процесса пользователь, создающий игру, может выбрать ее длительность и количество захваченных территорий, необходимых для досрочного выигрыша. Предложен выход в главное меню. Если игрок пытается подключиться к игре он должен ввести IP адрес компьютера, на котором была создана игра (это значение будет указано на главном меню). Если она не была создана, то ему будет выведено соответствующее сообщение и будет предложен возврат в главное меню.(рис. 6)</p>
<p align="center">
<img src="../images/image_4_new.png" alt="Настройка партии">
</p> 
<p align = "center">Рисунок 6 - Настройка партии</p>
<p align = "justify">После установления соединения с другим игроком пользователь включается в игровой процесс. На игровом поле будет происходить непосредственно игровой процесс (завоевание территорий игроками и т.д.), справа на информационном поле будет размещена прочая информация (например, текущие достижения игроков, кнопки выхода в главное меню и паузы и т.д.). На рисунке 7 представлена разметка и игрового процесса.</p>
<p align="center">
<img src="../images/image_2_new.png" alt="Разметка игрового процесса">
</p> 
<p align = "center">Рисунок 7 - Разметка игрового процесса</p>
<p align = "justify">В конце игры пользователю будет предоставлена статистика о завершенном сеансе. В ней будет содержаться информация о количестве захваченных территорий, о затраченном на сеанс времени и т.д. Будет предложен выход в главное меню.(рис. 8)</p> 
<p align="center">
<img src="../images/image_3_new.png" alt="Статистика сеанса">
</p>
<p align = "center">Рисунок 8 - Статистика сеанса</p>
